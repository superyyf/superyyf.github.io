<!doctype html><html lang=zh-cn>
<head>
<meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge,chrome=1">
<title>多协议标签交换MPLS | Play With YYF</title>
<meta name=viewport content="width=device-width,minimum-scale=1">
<meta name=description content="网络层/多协议标签交换MPLS">
<meta name=generator content="Hugo 0.92.2">
<meta name=robots content="noindex, nofollow">
<link rel=stylesheet href=/ananke/css/main.min.css>
<meta property="og:title" content="多协议标签交换MPLS">
<meta property="og:description" content="网络层/多协议标签交换MPLS">
<meta property="og:type" content="article">
<meta property="og:url" content="http://yyf.zone/posts/2021-1-6-mpls/"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2021-01-06T16:42:04+00:00">
<meta property="article:modified_time" content="2021-01-06T16:42:04+00:00">
<meta itemprop=name content="多协议标签交换MPLS">
<meta itemprop=description content="网络层/多协议标签交换MPLS"><meta itemprop=datePublished content="2021-01-06T16:42:04+00:00">
<meta itemprop=dateModified content="2021-01-06T16:42:04+00:00">
<meta itemprop=wordCount content="37">
<meta itemprop=keywords content="笔记,"><meta name=twitter:card content="summary">
<meta name=twitter:title content="多协议标签交换MPLS">
<meta name=twitter:description content="网络层/多协议标签交换MPLS">
</head>
<body class="ma0 avenir bg-near-white">
<header>
<div class=bg-black>
<nav class="pv3 ph3 ph4-ns" role=navigation>
<div class="flex-l justify-between items-center center">
<a href=/ class="f3 fw2 hover-white no-underline white-90 dib">
Play With YYF
</a>
<div class="flex-l items-center">
<div class=ananke-socials>
</div>
</div>
</div>
</nav>
</div>
</header>
<main class=pb7 role=main>
<article class="flex-l flex-wrap justify-between mw8 center ph3">
<header class="mt4 w-100">
<aside class="instapaper_ignoref b helvetica tracked">
POSTS
</aside>
<div id=sharing class="mt3 ananke-socials">
</div>
<h1 class="f1 athelas mt3 mb1">多协议标签交换MPLS</h1>
<time class="f6 mv4 dib tracked" datetime=2021-01-06T16:42:04Z>January 6, 2021</time>
</header>
<div class="nested-copy-line-height lh-copy serif f4 nested-links mid-gray pr4-l w-two-thirds-l"><p>网络层/多协议标签交换MPLS</p>
<h1 id=多协议标签交换mpls>多协议标签交换MPLS</h1>
<h2 id=概述>概述</h2>
<p><strong>多协议标签协议交换MPLS</strong>(MultiProtocal Label Switching)是一种在开放的通信网上利用标签引导数据高速、高效传输的新技术。多协议的含义是指MPLS不但可以支持多种网络层层面上的协议，还可以兼容第二层的多种数据链路层技术。</p>
<p>特点：</p>
<ol>
<li>支持<a href="https://baike.baidu.com/item/%E9%9D%A2%E5%90%91%E8%BF%9E%E6%8E%A5/9156871?fromtitle=%E9%9D%A2%E5%90%91%E8%BF%9E%E6%8E%A5%E7%9A%84&fromid=479545#0">面向连接</a>的服务质量。</li>
<li>支持流量工程，平衡网络负载。</li>
<li>有效地支持虚拟专用网VPN。</li>
</ol>
<hr>
<h2 id=工作原理>工作原理</h2>
<p><img src=MPLS%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86.png alt=MPLS工作原理></p>
<p>MPLS的一个重要特点就是在MPLS域的入口处，给每一个IP数据报打上固定长度“标记”，然后对打上标记的IP数据报用硬件进行转发，这就使得IP数据报转发的过程大大地加快了。<br>
<strong>MPLS域</strong>(MPLS domain)是指该域中有许多彼此相邻的路由器，并且所有的路由器都是支持MPLS技术的<strong>标签交换路由器LSR</strong>(Label Switching Router)。</p>
<ol>
<li>入口结点：打上标签</li>
<li>LSR：转发+更新标签</li>
<li>出口结点：去除标签</li>
</ol>
<hr>
<h2 id=mpls首部的位置和格式>MPLS首部的位置和格式</h2>
<p><strong>位置</strong>：从层次的角度看，MPLS首部就处在第二层和第三层之间。其实就是在以太网的帧首部和IP数据报的首部之间插入一个4字节的MPLS首部。<br>
<strong>格式</strong>：MPLS首部包括4个字段：</p>
<ol>
<li>标签值。占20位。</li>
<li>试验。占3位，目前保留用于试验。</li>
<li>栈S。占1位，在有“标签栈”时使用。</li>
<li>生存时间TTL。占8位，用来防止MPLS分组在域中兜圈子。</li>
</ol>
<hr>
<h2 id=mpls在负载平衡中的应用>MPLS在负载平衡中的应用</h2>
<p>MPLS有个重要的概念就是<strong>转发等价类FEC</strong>(Forwarding Equivalence Class)。所谓“转发等价类”就是路由器按照同样方式对待的<strong>IP数据报的集合</strong>。FEC的划分不受限制。
例如：</p>
<ol>
<li>目的IP地址与某一个特定IP地址前缀匹配的IP数据报集合。</li>
<li>所有源地址与目的地址都相同的IP数据报集合。</li>
<li>具有某种服务质量需求的IP数据报集合。</li>
</ol>
<p>入口结点将同样FEC的IP数据报都指派同样的标签。即<strong>FEC和标签是一一对应的关系</strong>。这样可以使网络的负载较为平衡，网络管理员采用自定义的FEC就可以更好地管理网络的资源。这种均衡网络负载的做法也称为<strong>流量工程</strong>IE(Traffic Engineering)或<strong>通信量工程</strong>。</p>
<p><img src=/image/%E8%B4%9F%E8%BD%BD%E5%B9%B3%E8%A1%A1.png alt=负载平衡></p>
<p>参考文献：《计算机网络（第7版）》谢希仁著。</p><ul class=pa0>
<li class="list di">
<a href=/tags/%E7%AC%94%E8%AE%B0 class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">笔记</a>
</li>
</ul>
<div class="mt6 instapaper_ignoref">
</div>
</div>
<aside class="w-30-l mt6-l">
<div class="bg-light-gray pa3 nested-list-reset nested-copy-line-height nested-links">
<p class="f5 b mb3">Related</p>
<ul class="pa0 list">
<li class=mb2>
<a href=/posts/2021-1-2-ipv6/>IPv6</a>
</li>
<li class=mb2>
<a href=/posts/2021-1-2-ipmulticast/>IP多播</a>
</li>
<li class=mb2>
<a href=/posts/2021-1-5-vpnandnat/>虚拟专用网络VPN和网络地址转换NAT</a>
</li>
</ul>
</div>
</aside>
</article>
</main>
<footer class="bg-black bottom-0 w-100 pa3" role=contentinfo>
<div class="flex justify-between">
<a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href=http://yyf.zone/>
&copy; Play With YYF 2022
</a>
<div>
<div class=ananke-socials>
</div></div>
</div>
</footer>
</body>
</html>